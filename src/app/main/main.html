<div flex layout="column">

  <md-toolbar layout-align="center end">
    <div class="md-toolbar-tools">
      <h2>Protractor Recorder</h2>
    </div>
  </md-toolbar>

  <div flex layout="row">

    <md-sidenav class="md-sidenav-left md-whiteframe-z2" md-component-id="left" md-is-locked-open="$mdMedia('gt-md')">

      <div ng-repeat="describe in main.describes">
        <md-subheader class="md-no-sticky">{{ describe.string }}</md-subheader>
        <md-divider></md-divider>
        <md-list>
          <md-list-item ng-click="main.setSpec(spec)" ng-repeat="spec in describe.specs">
            <p>{{ spec.string ? spec.string : 'Untitled Spec' }}</p>
            <md-icon ng-click="main.removeSpec($index)" md-svg-icon="delete"></md-icon>
          </md-list-item>
        </md-list>

      </div>

      <span flex></span>
      <md-divider></md-divider>
      <div row="column">
        <md-list>
          <md-list-item ng-click="openSettings()" aria-label="Configurações">
            <md-icon md-svg-icon="settings"></md-icon>
            <p>Configurações</p>
          </md-list-item>
        </md-list>
      </div>

    </md-sidenav>

    <div flex layout-padding layout="column">
      <md-content class="flex layout-column">



        <md-input-container md-no-float class="md-block">
          <input ng-model="main.url" type="text" placeholder="Url">
        </md-input-container>

        <md-input-container class="md-block">
          <label>Describe</label>
          <input type="text" ng-model="main.describe.string">
        </md-input-container>

        <md-input-container class="md-block">
          <label>Spec</label>
          <input type="text" ng-model="main.spec.string">
        </md-input-container>

        <div layout="row" layout-align="center start" flex>

          <md-whiteframe layout-margin layout="column" flex class="md-whiteframe-1dp">
            <table class="table table-hover table-mc-light-blue ng-scope">
              <thead>
              <tr>
                <th>
                  <md-checkbox ng-model="all" aria-label="Checkbox 1">
                  </md-checkbox>
                </th>
                <th>Action</th>
                <th>Type</th>
                <th>Locators</th>
                <th>Value</th>
                <th></th>
              </tr>
              </thead>
              <tbody>
              <tr ng-repeat="action in main.spec.actions track by $index">
                <td>
                  <md-checkbox ng-model="action.status" aria-label="Checkbox $index"></md-checkbox>
                </td>
                <td><b>{{ action.action }}</b></td>
                <td>{{ action.type }}</td>
                <td>
                  <md-input-container ng-if="action.locators.length > 1" style="padding-bottom: 5px;" md-no-float class="md-block">
                    <md-select aria-label="Locator {{ locator.value }}" ng-model="action.locator.value">
                      <md-option ng-repeat="locator in action.locators" value="{{locator.value}}">
                        {{ locator.type }} - {{ locator.value }}
                      </md-option>
                    </md-select>
                  </md-input-container>
                  <span ng-if="action.locators.length == 1">{{ action.locators[0].type }} - {{ action.locators[0].value }}</span>
                </td>
                <td>{{ action.value }}</td>
                <td>
                  <md-button aria-label="Delete action" ng-click="main.removeAction($index)">
                    <md-icon md-svg-icon="close"></md-icon>
                  </md-button>
                </td>
              </tr>
              </tbody>
            </table>
          </md-whiteframe>
        </div>

        <!--<md-button ng-click="main.newDescribe()">New Describe</md-button>-->

        <!--<md-button ng-click="main.addSpec()">Add Spec</md-button>-->

        <md-button ng-click="main.createSession()">Create Session</md-button>

        <!--<md-button ng-click="main.setSessionUrl()">Start Session</md-button>-->

        <md-button ng-click="main.deleteSession()">Delete Session</md-button>

        <!--<md-button ng-click="main.getSessionUrl()">Session Url</md-button>-->

        <md-button ng-click="main.exportProtractor()">Export Protractor</md-button>

        <md-button ng-click="main.runTest()">Run Test</md-button>

        <!--<div style="display: none" id="source">teste</div>-->

      <!--<span ng-repeat="line in main.lines">
        {{ line }};
      </span>-->

      </md-content>
      <md-fab-speed-dial ng-hide="main.hidden" md-direction="up" md-open="main.isOpen"
                         class="md-scale md-fab-bottom-right" ng-class="{ 'md-hover-full': main.hover }"
                         ng-mouseenter="main.isOpen=true" ng-mouseleave="main.isOpen=false">
        <md-fab-trigger>
          <md-button aria-label="menu" ng-click="main.addSpec()" class="md-fab md-warn">
            <md-tooltip md-direction="top" md-visible="tooltipVisible">Add Spec</md-tooltip>
            <md-icon md-svg-icon="add" aria-label="menu"></md-icon>
          </md-button>
        </md-fab-trigger>
        <md-fab-actions>
          <md-button aria-label="Add Describe" class="md-fab md-raised md-mini"
                     ng-click="main.addDescribe()">
            <md-tooltip md-direction="left" md-visible="tooltipVisible"
                        md-autohide="false">
              New Describe
            </md-tooltip>
            <md-icon md-svg-src="add" aria-label="Describe"></md-icon>
          </md-button>
          <md-button aria-label="Add Config" class="md-fab md-raised md-mini"
                     ng-click="main.addConfig()">
            <md-tooltip md-direction="left" md-visible="tooltipVisible"
                        md-autohide="false">
              Add Config
            </md-tooltip>
            <md-icon md-svg-src="add" aria-label="Config"></md-icon>
          </md-button>
          <!--<div ng-repeat="item in demo.items">
            <md-button aria-label="{{item.name}}" class="md-fab md-raised md-mini"
                       ng-click="demo.openDialog($event, item)">
              <md-tooltip md-direction="{{item.direction}}" md-visible="tooltipVisible"
                          md-autohide="false">
                {{item.name}}
              </md-tooltip>
              <md-icon md-svg-src="{{item.icon}}" aria-label="{{item.name}}"></md-icon>
            </md-button>
          </div>-->
        </md-fab-actions>
      </md-fab-speed-dial>
    </div>
  </div>
</div>